{"version":3,"file":"ngx-tribute.js.map","sources":["ng://ngx-tribute/lib/ngx-tribute.directive.ts","ng://ngx-tribute/lib/ngx-tribute.module.ts"],"sourcesContent":["import {Directive, ElementRef, EventEmitter, Input, OnInit, Optional, Output, OnDestroy} from '@angular/core';\nimport {FormControl, FormControlDirective, FormControlName, NgModel} from '@angular/forms';\nimport Tribute, {TributeCollection, TributeOptions} from 'tributejs';\n\n@Directive({\n    selector: '[ngxTribute]',\n    exportAs: 'ngx-tribute'\n})\nexport class NgxTributeDirective<T> implements OnInit, OnDestroy {\n    @Input('ngxTribute')\n    options: TributeOptions<T>;\n\n    @Input()\n    menuContainer: HTMLElement;\n\n    @Input()\n    implicitFormControl: FormControl;\n\n    @Output()\n    onMentioned = new EventEmitter<string>();\n\n    @Output()\n    mentionItemSelected = new EventEmitter<any>();\n\n    tribute: Tribute<T>;\n\n    constructor(\n        private element: ElementRef,\n        @Optional() private formControlName: FormControlName,\n        @Optional() private formControlDirective: FormControlDirective,\n        @Optional() private ngModelDirective: NgModel\n    ) {}\n\n    get control(): FormControl {\n        return this.implicitFormControl ||\n            (this.formControlName && this.formControlName.control) ||\n            (this.formControlDirective && this.formControlDirective.control) ||\n            (this.ngModelDirective && this.ngModelDirective.control);\n    }\n\n    ngOnInit() {\n        const options: TributeOptions<T> = { ...this.options };\n\n        if (this.menuContainer) {\n            (options as TributeCollection<T>).menuContainer = this.menuContainer;\n        }\n\n        this.tribute = new Tribute(options);\n        this.tribute.attach(this.element.nativeElement);\n\n        this.element.nativeElement.addEventListener('tribute-replaced', (event) => {\n            const value = ['INPUT', 'TEXTAREA'].includes(\n                this.element.nativeElement.tagName\n            )\n                ? this.element.nativeElement.value\n                : this.element.nativeElement.innerHTML;\n\n            this.onMentioned.emit(value);\n            this.mentionItemSelected.emit(event.detail.item.original);\n\n            if (this.control) {\n                this.control.setValue(value);\n            }\n        });\n    }\n\n    ngOnDestroy() {\n        if (this.tribute) {\n            this.tribute.detach(this.element.nativeElement);\n        }\n    }\n}\n","import { NgModule } from '@angular/core';\nimport {NgxTributeDirective} from './ngx-tribute.directive';\n\n@NgModule({\n  imports: [\n  ],\n  declarations: [NgxTributeDirective],\n  exports: [NgxTributeDirective]\n})\nexport class NgxTributeModule { }\n"],"names":[],"mappings":";;;;;;;;AAAA;;;AAQA;;;;;;;IAkBI,YACY,SACY,eAAgC,EAChC,oBAA0C,EAC1C,gBAAyB;QAHrC,YAAO,GAAP,OAAO;QACK,oBAAe,GAAf,eAAe,CAAiB;QAChC,yBAAoB,GAApB,oBAAoB,CAAsB;QAC1C,qBAAgB,GAAhB,gBAAgB,CAAS;2BAXnC,IAAI,YAAY,EAAU;mCAGlB,IAAI,YAAY,EAAO;KASzC;;;;IAEJ,IAAI,OAAO;QACP,OAAO,IAAI,CAAC,mBAAmB;aAC1B,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC;aACrD,IAAI,CAAC,oBAAoB,IAAI,IAAI,CAAC,oBAAoB,CAAC,OAAO,CAAC;aAC/D,IAAI,CAAC,gBAAgB,IAAI,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC;KAChE;;;;IAED,QAAQ;;QACJ,MAAM,OAAO,qBAA2B,IAAI,CAAC,OAAO,EAAG;QAEvD,IAAI,IAAI,CAAC,aAAa,EAAE;YACpB,mBAAC,OAA+B,GAAE,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;SACxE;QAED,IAAI,CAAC,OAAO,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,CAAC;QACpC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;QAEhD,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,CAAC,KAAK;;YAClE,MAAM,KAAK,GAAG,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC,QAAQ,CACxC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,OAAO,CACrC;kBACK,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK;kBAChC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,SAAS,CAAC;YAE3C,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAC7B,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAE1D,IAAI,IAAI,CAAC,OAAO,EAAE;gBACd,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;aAChC;SACJ,CAAC,CAAC;KACN;;;;IAED,WAAW;QACP,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;SACnD;KACJ;;;YAlEJ,SAAS,SAAC;gBACP,QAAQ,EAAE,cAAc;gBACxB,QAAQ,EAAE,aAAa;aAC1B;;;;YAPkB,UAAU;YACc,eAAe,uBA2BjD,QAAQ;YA3BI,oBAAoB,uBA4BhC,QAAQ;YA5B2C,OAAO,uBA6B1D,QAAQ;;;sBArBZ,KAAK,SAAC,YAAY;4BAGlB,KAAK;kCAGL,KAAK;0BAGL,MAAM;kCAGN,MAAM;;;;;;;ACrBX;;;YAGC,QAAQ,SAAC;gBACR,OAAO,EAAE,EACR;gBACD,YAAY,EAAE,CAAC,mBAAmB,CAAC;gBACnC,OAAO,EAAE,CAAC,mBAAmB,CAAC;aAC/B;;;;;;;;;;;;;;;"}
